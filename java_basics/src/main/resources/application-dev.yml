server:
  # 端口
  port: 8080
  servlet:
    # 访问路径前缀
    context-path: /demo
    encoding:
      # 使用当前配置文件进行编码, 可配合 charset: utf-8 使用
      force: true

# Spring Auto-Configuration
spring:
  application:
    name: demo
  main:
    # 允许后覆盖相同名称的 bean, 防止项目集成后出现重复定义的冲突
    allow-bean-definition-overriding: true

  # 数据库
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/data?createDatabaseIfNotExist=true&useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    # 用户信息
    username: root
    password: "12345678"
    # 连接池
    type: com.zaxxer.hikari.HikariDataSource
    hikari:
      minimum-idle: 3
      maximum-pool-size: 3

  # 定时任务
  task:
    scheduling:
      pool:
        size: 10

  # Elasticsearch
  elasticsearch:
    uris: http://localhost:9200
    socket-timeout: 60000
    connection-timeout: 60000

  # JPA
  jpa:
    # log 中打印 sql 语句, 便于排查错误
    show-sql: true
    # true = 保持数据库连接直至 controller 执行完
    open-in-view: false

  # Kafka
  kafka:
    bootstrap-servers: localhost:9092
    template:
      default-topic: demo-topic
    consumer:
      group-id: demo-group
      auto-offset-reset:
    listener:
      ack-mode: manual_immediate
    producer:
      # 0 不返回, 1 leader 收到返回成功, all/-1 全员收到返回成功
      acks: 1

  # Redis
  redis:
    host: localhost
    port: 6379
    # 需要时间单位
    timeout: 10s
    lettuce:
      pool:
        max-active: 8
        # 需要时间单位
        max-wait: -1s
        max-idle: 8
        min-idle: 0

  # Thymeleaf
  thymeleaf:
    check-template-location: false

# Swagger
springdoc:
  swagger-ui:
    # 测试环境启用, 生产环境需关闭
    enabled: true
# 日志
logging:
  level:
    # 最低展示级别, 减少非必要信息的输出 (error > warn > info > debug)
    ROOT: info
  # 输出格式
  pattern:
    # 参数: {时间} [线程名] 日志级别 日志所属类. 方法名-行号 - 错误信息及换行
    file: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %highlight(%-5level) %yellow(%logger{50}).%M-%L - %msg %n'
    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %highlight(%-5level) %yellow(%logger{50}).%M-%L - %msg %n'
  logback:
    rolling policy:
      # 最大保留时长(天)
      max-history: 10
      max-file-size: 100MB
  file:
    path: "logs"
